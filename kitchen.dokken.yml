---
driver:
  name: dokken
  privileged: true
  chef_version: 17

transport:
  name: dokken

provisioner:
  name: dokken
  product_name: chef
  product_version: 17

verifier:
  name: inspec

platforms:
  - name: centos-7
    driver:
      image: dokken/centos-7
      pid_one_command: /usr/lib/systemd/systemd
  
  - name: centos-8
    driver:
      image: dokken/centos-8
      pid_one_command: /usr/lib/systemd/systemd
  
  - name: amazonlinux-2
    driver:
      image: dokken/amazonlinux-2
      pid_one_command: /usr/lib/systemd/systemd

suites:
  - name: default
    run_list:
      - recipe[oracle-inventory-management::default]
    verifier:
      inspec_tests:
        - test/integration/default
    attributes:
      oracle:
        inventory:
          user: oracle
          group: dba
          location: /opt/oracle/oraInventory
          ora_inst_path: /etc/oraInst.loc
          manage_users: true
          
  - name: backup
    run_list:
      - recipe[oracle-inventory-management::default]
      - recipe[oracle-inventory-management::backup]
    verifier:
      inspec_tests:
        - test/integration/backup
    attributes:
      oracle:
        inventory:
          user: oracle
          group: dba
          location: /opt/oracle/oraInventory
          ora_inst_path: /etc/oraInst.loc
          manage_users: true
          backup_dir: /var/backups/oracle_inventory
          max_backups: 5